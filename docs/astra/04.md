---
sidebar_position: 4
---

# Резервное копирование Postgres

## Резервное копирование

* создаем файл pg-backup.sh
```
#!/bin/bash

db=test1
backupfolder=/BACKUP
backupfile=$backupfolder/$db-$(date +%d-%m-%Y_%H-%M-%S).tar

mkdir -p $backupfolder

if pg_dump -h localhost -U postgres -f $backupfile -F tar $db ; then
   echo 'ok'
else
   echo 'error!'
   exit
fi
```
* устанавливаем cron
```
sudo crontab -e
0 0 * * * /home/profcase/pg-backup.sh
```

## Восстановление
```
sudo pg_restore -c -h localhost -U postgres -d test2 /BACKUP/test1-02-12-2025_00-02-24.tar
```